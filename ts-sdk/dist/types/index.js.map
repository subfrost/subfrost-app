{"version":3,"sources":["../../src/types/index.ts"],"sourcesContent":["/**\n * Core type definitions for @alkanes/ts-sdk\n */\n\nimport * as bitcoin from 'bitcoinjs-lib';\n\n/**\n * Bitcoin network types\n */\nexport type NetworkType = 'mainnet' | 'testnet' | 'signet' | 'regtest';\n\n/**\n * HD wallet derivation path configuration\n */\nexport interface HDPath {\n  purpose: number;\n  coinType: number;\n  account: number;\n  change: number;\n  index: number;\n}\n\n/**\n * Keystore encryption parameters (compatible with ethers.js style)\n */\nexport interface KeystoreParams {\n  salt: string;\n  nonce?: string;\n  iterations: number;\n  algorithm?: string;\n}\n\n/**\n * Encrypted keystore JSON structure (ethers.js compatible)\n */\nexport interface EncryptedKeystore {\n  encrypted_mnemonic: string;\n  master_fingerprint: string;\n  created_at: number;\n  version: string;\n  pbkdf2_params: KeystoreParams;\n  account_xpub: string;\n  hd_paths: Record<string, string>;\n}\n\n/**\n * Decrypted keystore object (in-memory only)\n */\nexport interface Keystore {\n  mnemonic: string;\n  masterFingerprint: string;\n  accountXpub: string;\n  hdPaths: Record<string, HDPath>;\n  network: NetworkType;\n  createdAt: number;\n}\n\n/**\n * Wallet configuration\n */\nexport interface WalletConfig {\n  network: NetworkType;\n  derivationPath?: string;\n  account?: number;\n}\n\n/**\n * Address information\n */\nexport interface AddressInfo {\n  address: string;\n  path: string;\n  publicKey: string;\n  index: number;\n}\n\n/**\n * Transaction input\n */\nexport interface TxInput {\n  txid: string;\n  vout: number;\n  value: number;\n  address: string;\n}\n\n/**\n * Transaction output\n */\nexport interface TxOutput {\n  address: string;\n  value: number;\n}\n\n/**\n * PSBT build options\n */\nexport interface PsbtOptions {\n  inputs: TxInput[];\n  outputs: TxOutput[];\n  feeRate?: number;\n  network?: bitcoin.networks.Network;\n}\n\n/**\n * Alkane token ID\n */\nexport interface AlkaneId {\n  block: number;\n  tx: number;\n}\n\n/**\n * Alkane balance information\n */\nexport interface AlkaneBalance {\n  id: AlkaneId;\n  amount: string;\n  name?: string;\n  symbol?: string;\n  decimals?: number;\n}\n\n/**\n * Alkane call parameters\n */\nexport interface AlkaneCallParams {\n  alkaneId: AlkaneId;\n  method: string;\n  args: any[];\n  value?: number;\n}\n\n/**\n * Provider configuration for @oyl/sdk compatibility\n */\nexport interface ProviderConfig {\n  url: string;\n  projectId?: string;\n  network: bitcoin.networks.Network;\n  networkType: NetworkType;\n  version?: string;\n}\n\n/**\n * Transaction result\n */\nexport interface TransactionResult {\n  txId: string;\n  rawTx: string;\n  size: number;\n  weight: number;\n  fee: number;\n  satsPerVByte: string;\n}\n\n/**\n * Block information\n */\nexport interface BlockInfo {\n  hash: string;\n  height: number;\n  timestamp: number;\n  txCount: number;\n}\n\n/**\n * UTXO information\n */\nexport interface UTXO {\n  txid: string;\n  vout: number;\n  value: number;\n  status: {\n    confirmed: boolean;\n    block_height?: number;\n    block_hash?: string;\n    block_time?: number;\n  };\n}\n\n/**\n * Address balance\n */\nexport interface AddressBalance {\n  address: string;\n  confirmed: number;\n  unconfirmed: number;\n  utxos: UTXO[];\n}\n\n/**\n * Export options\n */\nexport interface ExportOptions {\n  format?: 'json' | 'string';\n  pretty?: boolean;\n}\n\n/**\n * Import options\n */\nexport interface ImportOptions {\n  validate?: boolean;\n  network?: NetworkType;\n}\n\n/**\n * Network type extended to include oylnet\n */\nexport type Network = 'mainnet' | 'testnet' | 'signet' | 'oylnet' | 'regtest';\n\n/**\n * Spend strategy for UTXO selection (compatible with @oyl/sdk)\n */\nexport interface SpendStrategy {\n  addressOrder: string[];\n  utxoSortGreatestToLeast: boolean;\n  changeAddress: string;\n}\n\n/**\n * Formatted UTXO (compatible with API response format)\n * Supports both camelCase (API) and snake_case naming conventions\n */\nexport interface FormattedUtxo {\n  // Transaction ID - support both conventions\n  txid?: string;\n  txId?: string;\n  // Output index - support both conventions\n  vout?: number;\n  outputIndex?: number;\n  // Value in satoshis - support both conventions\n  value?: number;\n  satoshis?: number;\n  // Script public key - support both conventions\n  scriptPubKey?: string;\n  scriptPk?: string;\n  // Address\n  address: string;\n  addressType?: string;\n  // Confirmation status\n  confirmations?: number;\n  indexed?: boolean;\n  // Inscriptions and tokens\n  inscriptions?: any[];\n  runes?: any[];\n  alkanes?: Record<string, { value: string | number; name?: string; symbol?: string }>;\n}\n\n/**\n * Account UTXO portfolio (compatible with @oyl/sdk)\n */\nexport interface AccountUtxoPortfolio {\n  utxos: FormattedUtxo[];\n  spendableUtxos: FormattedUtxo[];\n  spendableTotalBalance: number;\n  totalBalance: number;\n}\n\n/**\n * AMM swap parameters\n */\nexport interface SwapParams {\n  sellCurrency: string;\n  buyCurrency: string;\n  direction: 'sell' | 'buy';\n  sellAmount: string;\n  buyAmount: string;\n  maxSlippage: number;\n  feeRate: number;\n  tokenPath?: string[];\n  deadlineBlocks?: number;\n}\n\n/**\n * AMM liquidity parameters\n */\nexport interface LiquidityParams {\n  token0: string;\n  token1: string;\n  amount0: string;\n  amount1: string;\n  feeRate: number;\n  slippage?: number;\n}\n\n/**\n * Wrap/Unwrap BTC parameters\n */\nexport interface WrapParams {\n  amount: string;\n  feeRate: number;\n  address?: string;\n}\n\n/**\n * Execute with wrap/unwrap parameters\n */\nexport interface ExecuteWithWrapParams {\n  operation: 'swap' | 'addLiquidity' | 'removeLiquidity';\n  params: SwapParams | LiquidityParams;\n  account: any;\n  provider: any;\n  signer: any;\n}\n\n/**\n * Asset type enumeration for swap operations\n */\nexport enum AssetType {\n  BRC20 = 'brc20',\n  RUNES = 'runes',\n  COLLECTIBLE = 'collectible',\n  ALKANES = 'alkanes',\n}\n\n/**\n * Custom error class for OYL transactions\n */\nexport class OylTransactionError extends Error {\n  public code?: string;\n  public details?: any;\n\n  constructor(message: string, code?: string, details?: any) {\n    super(message);\n    this.name = 'OylTransactionError';\n    this.code = code;\n    this.details = details;\n    Object.setPrototypeOf(this, OylTransactionError.prototype);\n  }\n}\n\n/**\n * Swap/marketplace types (legacy OYL compatibility stubs)\n */\nexport interface SwapBrcBid {\n  address: string;\n  auctionId: string;\n  bidPrice: number;\n  pubKey: string;\n  receiveAddress: string;\n  feerate: number;\n}\n\nexport interface SignedBid {\n  psbtHex: string;\n  auctionId: string;\n  bidId: string;\n}\n\nexport interface OkxBid {\n  orderId: string;\n  psbtBase64: string;\n}\n\nexport interface GetOffersParams {\n  ticker?: string;\n  address?: string;\n  limit?: number;\n  offset?: number;\n  sort?: string;\n  sort_by?: string;\n  order?: string;\n}\n\nexport interface GetCollectionOffersParams {\n  collectionId?: string;\n  address?: string;\n  limit?: number;\n  offset?: number;\n  sort?: string;\n  sort_by?: string;\n  order?: string;\n}\n\n/**\n * Provider interface (legacy OYL compatibility)\n */\nexport interface Provider {\n  network?: any;\n  networkType?: string;\n  api?: {\n    initSwapBid?: (params: any) => Promise<any>;\n    initRuneSwapBid?: (params: any) => Promise<any>;\n    initCollectionSwapBid?: (params: any) => Promise<any>;\n    submitSignedBid?: (params: any) => Promise<any>;\n    submitSignedRuneBid?: (params: any) => Promise<any>;\n    submitSignedCollectionBid?: (params: any) => Promise<any>;\n    getListingPsbt?: (params: any) => Promise<any>;\n    submitListingPsbt?: (params: any) => Promise<any>;\n    getSellerPsbt?: (params: any) => Promise<any>;\n    submitBuyerPsbt?: (params: any) => Promise<any>;\n    getOrdinalsWalletNftOfferPsbt?: (params: any) => Promise<any>;\n    getOrdinalsWalletRuneOfferPsbt?: (params: any) => Promise<any>;\n    submitOrdinalsWalletBid?: (params: any) => Promise<any>;\n    submitOrdinalsWalletRuneBid?: (params: any) => Promise<any>;\n  };\n  esplora?: {\n    getFeeEstimates?: () => Promise<Record<string, number>>;\n    getTxInfo?: (txId: string) => Promise<any>;\n  };\n  pushPsbt?: (params: { psbtBase64: string }) => Promise<any>;\n}\n\n/**\n * SwapSigner interface (legacy OYL compatibility for swap operations)\n */\nexport interface SwapSigner {\n  segwitKeyPair?: {\n    privateKey?: Buffer;\n    publicKey?: Buffer;\n  };\n  taprootKeyPair?: {\n    privateKey?: Buffer;\n    publicKey?: Buffer;\n  };\n  signAllInputs: (params: { rawPsbtHex: string; finalize?: boolean }) => Promise<{\n    signedPsbt: string;\n    signedHexPsbt: string;\n  }>;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsTO,IAAK,YAAL,kBAAKA,eAAL;AACL,EAAAA,WAAA,WAAQ;AACR,EAAAA,WAAA,WAAQ;AACR,EAAAA,WAAA,iBAAc;AACd,EAAAA,WAAA,aAAU;AAJA,SAAAA;AAAA,GAAA;AAUL,IAAM,sBAAN,MAAM,6BAA4B,MAAM;AAAA,EAI7C,YAAY,SAAiB,MAAe,SAAe;AACzD,UAAM,OAAO;AACb,SAAK,OAAO;AACZ,SAAK,OAAO;AACZ,SAAK,UAAU;AACf,WAAO,eAAe,MAAM,qBAAoB,SAAS;AAAA,EAC3D;AACF;","names":["AssetType"]}